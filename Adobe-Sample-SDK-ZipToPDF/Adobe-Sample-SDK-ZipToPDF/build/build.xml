<?xml version="1.0" encoding="UTF-8"?>

<!--
/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright [first year code created] Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
-->

<project default="inc" name="SamplePDFGOrchestration" basedir=".">

<property environment="env"/>

<property name="project.dir" value=".." />
<property name="client-libs.dir" location="${env.LiveCycle_ROOT}/LiveCycle_ES_SDK/client-libs" />
<property name="client-common.dir" location="${client-libs.dir}/common" />
<property name="export.dir" location="${project.dir}/export" />
<property name="client-thirdparty.dir" location="${client-libs.dir}/thirdparty" />
<property name="build.out.dir" location="${project.dir}/build/out" />
<property name="build.classes.dir" location="${export.dir}/classes" />
<property name="build.src.dir" location="${project.dir}/src" />
<property name="property.dir" location="${project.dir}/properties" />

<path id="path.libs">
	<pathelement location="${client-common.dir}/adobe-livecycle-client.jar"/>	
	<pathelement location="${client-common.dir}/adobe-generatepdf-client.jar"/>	
	<pathelement location="${client-common.dir}/adobe-usermanager-client.jar"/>	
	<pathelement location="${client-thirdparty.dir}/activation.jar"/>
	<pathelement location="${client-thirdparty.dir}/axis.jar"/>
	<pathelement location="${client-thirdparty.dir}/commons-collections-3.1.jar"/>	
	<pathelement location="${client-thirdparty.dir}/commons-discovery.jar"/>	
	<pathelement location="${client-thirdparty.dir}/commons-logging.jar"/>	
	<pathelement location="${client-thirdparty.dir}/jaxrpc.jar"/>	
	<pathelement location="${client-thirdparty.dir}/log4j.jar"/>	
	<pathelement location="${client-thirdparty.dir}/mail.jar"/>	
	<pathelement location="${client-thirdparty.dir}/saaj.jar"/>
	<pathelement location="${client-thirdparty.dir}/wsdl4j.jar"/>	
	<pathelement location="${client-thirdparty.dir}/xercesImpl.jar"/>
</path>

<target name="inc">
		<antcall target="compile"/>
</target>

<!-- Creates the classes output & export directory-->
<target name="prepare" >
	<echo message="Creating the output directories for ZipToPDF sample"/>
	<mkdir dir="${build.out.dir}" />
	<mkdir dir="${export.dir}" />
</target>

 <!-- Empties the export directory & removes the classes output directory -->
<target name="clean">
	<echo message="Cleaning ZipToPDF sample"/>
    <delete quiet="true" dir="${build.out.dir}" />
	<delete quiet="true" dir="${export.dir}" />
</target>

<!-- Compiles the java files in src & creates the jar-->
<target name="compile" depends="prepare">
	<echo message="Compile PDFG ZipToPDF sample orchestration code"/>
	<javac destdir="${build.out.dir}" debug="true" deprecation="true">
		<classpath>
			<path refid="path.libs"/>
		</classpath>
		<src path="${build.src.dir}"/>
			<include name="**/*.java"/>
	</javac>
	<copy todir="${build.out.dir}">
		<fileset dir="${build.src.dir}" includes="**/*.properties" />
	</copy>

	<jar destfile="${export.dir}/ZipToPDFTestClient.jar">
		<zipfileset dir="${build.out.dir}">
	       <include name="**/*.class"/>
		   <include name="**/*.properties"/>
        </zipfileset>
	</jar>
</target>

<target name="runConversionSample" depends="compile">
   <java classname="com.adobe.livecycle.samples.pdfg.ZipToPDFSample">
   <classpath>
      <pathelement path="${export.dir}/ZipToPDFTestClient.jar"/>
	   <path refid="path.libs"/>
   </classpath>
   </java>
</target>
</project>